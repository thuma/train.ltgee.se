<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/elschema.css">
    <style>
    :root {
      --x: -130%;
      --y: 0;
    } 
    img.car {
      width:450px;
      animation-duration: 1s;
    }
    img.carrun {
      animation-name: car;
    }
    @keyframes car {
      from {transform: translate(0,0);}
      to {transform: translate(var(--x),var(--y));}
    }
    </style>
    <script src="bootstrap.min.js"></script>
    <script src="vue.js"></script>
    <title>10-Kompisar</title>
  </head>
  <body>

  <div id="app" class="container" v-if="email">

    <h1>10-Kompisar</h1>
    <p>
    I denna √∂vning f√•r du tr√§na p√• 10-kompisarna.
    </p>
    <div class="row">
      <div class="col">
        <div class="btn-group-vertical" role="group" aria-label="Vertical button group">
          <button type="button" class="btn btn-outline-primary" v-on:click="run(1)">1</button>
          <button type="button" class="btn btn-outline-primary" v-on:click="run(2)">2</button>
          <button type="button" class="btn btn-outline-primary" v-on:click="run(3)">3</button>
          <button type="button" class="btn btn-outline-primary" v-on:click="run(4)">4</button>
          <button type="button" class="btn btn-outline-primary" v-on:click="run(5)">5</button>
          <button type="button" class="btn btn-outline-primary" v-on:click="run(6)">6</button>
          <button type="button" class="btn btn-outline-primary" v-on:click="run(7)">7</button>
          <button type="button" class="btn btn-outline-primary" v-on:click="run(8)">8</button>
          <button type="button" class="btn btn-outline-primary" v-on:click="run(9)">9</button>
        </div>
      </div>
      <div class="col">
          <img v-if="ok" class="car" :class="{ carrun: svar }" src="imgs/10kompis/bil.png">
          <div v-if="!ok" style="font-size: 167px;transform: translate(-100%);" v-on:click="retry()">üí•</div>
      </div>
    </div>
    <div>
      <p>Vem √§r 10-komis till {{A}}?</p>
      <div v-if="status == true" class="alert alert-success">
        <img class="rounded" width="320" v-bind:src="successImage()">
      </div>
      <div class="progress mt-2">
        <div class="progress-bar" role="progressbar" v-bind:style='{"width": (antal/15 * 100)+"%"}'></div>
      </div>
    </div>
    <button class="btn btn-secondary" v-on:click="reset()">√Öterst√§ll √∂vning</button>
    <div v-if="antal >= 15" class="alert alert-success" >
      Nu har du klarat ett tr√§ningsvarv. <br>
      L√§mna in denna l√§nk p√• google classroom:<br>
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <button class="btn btn-primary" v-on:click="copylink()" type="button">Kopiera l√§nk</button>
        </div>
        <input id="correctlink" class="form-control" v-bind:value="handinlink()">
      </div>
    </div>
  </div>
  </body>
  <script src="common.js"></script>
  <script>
  Vue.use(Success);
  Vue.use(SaveAndRestore);
  var app = new Vue({
    el: '#app',
    data: {
      A: 1,
      B: 1,
      questions: [],
      svar: "",
      poang: 1,
      ksvar: "",
      antal:-1,
      taskname: "Addition",
      ok: true
    },
    computed: {
      status: function () {
        if (this.ksvar == this.S){
          return true;
        }
        else {
          return false;
        }
      },
      S: function(){
        return 10-this.A;
      }
    },
    methods: {
      retry: function(){
        this.ok = true;
      },
      run: function(number){
        document.documentElement.style.setProperty('--y', (35*Number(number)-75).toString()+'px');
        this.svar = number;
        var denna = this;
        window.setTimeout(function() {denna.kolla();denna.svar="";}, 1000);
      },
      kolla: function(){
         if(!(this.S == this.svar)){
           this.ok = false;
           this.poang = this.poang/2;
           this.svar = "";
         } else {
           var denna = this;
           window.setTimeout(function() {denna.next()}, 2000)
         }
         this.ksvar = this.svar;
      },
      next: function () {
        this.questions.push(this.veta);
        this.A=(Math.floor(Math.random() * 9)+1);
        this.antal = this.antal + this.poang;
        this.svar="";
        this.ksvar="";
        this.poang=1;
        this.save();
      }
    }
  })
  </script>
  
</html>

